(function(document,window,$){$(document).ready(function(){ajaxifyContactForm()});function ajaxifyContactForm(){var contactForm=$('#contact'),originalUrl=contactForm.attr('action');contactBtn=$('.contact [type=submit]'),alert=$('#contact-alert');contactBtn.on('click',function(e){e.preventDefault();var url=[originalUrl,contactForm.serialize()].join('?'),img=$('<img></img');img.on('error',function(e){console.log('known error',e)});contactBtn.val('Thank you');contactBtn.attr('disabled',!0);img.attr('src',url)})}})(document,window,$);const SEARCH_BASE='https://search.usa.gov/api/v2/search/i14y?affiliate=fedramp&access_key=pkwSg7Bh0i05jHA-ubLZkuVx5gz_AIL0HVPc09Vq_VQ=';function getUrlParams(paramStr){const idx=paramStr.indexOf('?')+1;const hashes=paramStr.slice(idx).split('&');return hashes.reduce((params,hash)=>{const[key,val]=hash.split('=');return Object.assign(params,{[key]:decodeURIComponent((val||'').replace(/\+/g,'%20'))})},{})}
function highlight(text){return(text||'').replace(/\ue000/g,'<strong>').replace(/\ue001/g,'</strong>')}
function searchAndDisplayResults(query){$('#results').empty();$.getJSON(SEARCH_BASE,{query},json=>{const results=json.web.results.map((result)=>{const title=highlight($('<i>').text(result.title).html());const snippet=highlight($('<i>').text(result.snippet).html());const $header=$('<h2>').append($('<a>').attr('href',result.url).html(title));const $snippet=$('<p>').html(snippet);return $('<li>').append($header).append($snippet).html()});const content=results.length?results.join(''):'<p>No results found.</p>';$('#results').append(content)})}
function initSearch(){const urlParams=getUrlParams(window.location.search);if(urlParams&&urlParams.search){const query=urlParams.search;$('#searchgovinput').val(query);searchAndDisplayResults(query)}}
initSearch()